# Вопросы и ответы


## Содержание

1. [Что выбрать: Kafka или традиционная очередь сообщений?](#что-выбрать-kafka-или-традиционная-очередь-сообщений)
2. [Как обеспечить exactly-once обработку?](#как-обеспечить-exactly-once-обработку)
3. [Как уменьшить задержки записи?](#как-уменьшить-задержки-записи)
4. [Что делать при высоком consumer lag?](#что-делать-при-высоком-consumer-lag)
5. [Как безопасно удалять топики?](#как-безопасно-удалять-топики)
6. [Можно ли читать историю событий заново?](#можно-ли-читать-историю-событий-заново)

## Что выбрать: Kafka или традиционная очередь сообщений?
Kafka выигрывает при высоком throughput, необходимости хранить историю и множественных потребителях. Традиционные очереди (RabbitMQ, ActiveMQ) подходят для сложных маршрутизаций и строгих транзакций.

## Как обеспечить exactly-once обработку?
Используйте idempotent producer, транзакции (`transactional.id`), а на стороне consumer'а — транзакционный commit offset вместе с бизнес-операцией.

## Как уменьшить задержки записи?
Тюнингуйте `acks=1`, уменьшайте `linger.ms`, используйте быстрые диски (NVMe) и достаточный объём оперативной памяти под page cache.

## Что делать при высоком consumer lag?
Проверьте производительность обработчика, увеличьте количество consumer'ов, масштабируйте кластер или распределите нагрузку по ключам.

## Как безопасно удалять топики?
Убедитесь, что `delete.topic.enable=true`, отключите производителей, дождитесь опустошения лагов и удалите топик инструментами `kafka-topics.sh`.

## Можно ли читать историю событий заново?
Да, Kafka позволяет сбросить offset и перечитать данные, что удобно для реконструкции состояния или повторной обработки.
